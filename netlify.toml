[build]
  publish = "public"
  functions = "netlify/functions"

[functions]
  included_files = ["data/**"]
  node_bundler = "esbuild"

# get-rarest-items loads ~2MB manifest + Bungie API; default 10s often causes 502
[functions."get-rarest-items"]
  timeout = 26

[[redirects]]
  from = "/api/auth-login"
  to = "/.netlify/functions/auth-login"
  status = 200
  force = true

[[redirects]]
  from = "/api/auth-callback"
  to = "/.netlify/functions/auth-callback"
  status = 200
  force = true

[[redirects]]
  from = "/api/auth-logout"
  to = "/.netlify/functions/auth-logout"
  status = 200
  force = true

[[redirects]]
  from = "/api/get-rarest-items"
  to = "/.netlify/functions/get-rarest-items"
  status = 200
  force = true
